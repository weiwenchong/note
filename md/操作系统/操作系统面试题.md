## 线程和进程的区别

## 进程间通信的方式
管道,命名管道,信号,信号量,共享内存,套接字,消息队列

## 线程的几种状态
线程和进程一样,都分为五个阶段: 创建,就绪,运行,阻塞,终止

## 线程哪些内容是私有的
栈(局部变量,函数参数),线程局部存储,寄存器(执行流的基本数据).

## IO
* 阻塞IO
* 非阻塞IO
* IO多路复用
1. select. 通过设置或者检查存放fd标识位的数据结构来进行下一步处理,单个进程可监视的fd数量有限,32位默认1024个;采用轮询的方式,效率低.
2. poll. 与select相似,fd集合不同,select是fd_set,poll是pollfd,没有最大数量限制,但一样需要轮询.
3. epoll. 采用触发模式,不用轮询,没有最大数量限制. 是根据每个fd上的callback函数实现的,只有活跃的socket会主动调用callback,所以在活跃socket比较少的情况下,epoll速度快,但是如果所有socket都活跃,则会存在性能问题.
* 异步IO

## 虚拟内存
虚拟内存是计算机内存管理的技术.
### 为什么要有虚拟内存
1. 直接使用物理地址不隔离,没有权限保护.
2. 每个进程都分配4g,内存不够用,如果放入硬盘中,那每次切换进程都需要从磁盘中读取,那速度慢.
3. 内存地址是随机分配的,所以程序运行的地址是不确定的.
### 虚拟内存大小
32位机器上虚拟内存最大4g,寻址指针为4字节,即2的32次方.64位机器上,寻址指针8字节,虚拟内存16g,即2的64次方.
### 访问虚拟内存
1. 所有的进程共享一整块物理内存,每个进程把自己需要的虚拟内存空间映射到物理内存上.
2. 通过页表来记录此页是否在内存上,以及如果在内存上,记录其物理内存页地址.
3. 当进程访问虚拟内存时,会查看页表,在物理内存上就直接访问,不在的话就会发生缺页异常.
4. 发生缺页异常后,操作系统阻塞该进程,将硬盘里的页换入内存,然后使该进程就绪.如果内存满了,就用一个页覆盖.
